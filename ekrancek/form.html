<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>enkrancek</title>
    <link rel="stylesheet" href="css/form.css" />
  </head>
  <body class="flex-center">
    <a class="boxed urica-link" href="index.html?msg=dXJpY2E%3D&fr=5">urica</a>

    <div class="main">
      <form action="./">
        <input class="boxed" type="text" name="msg" id="msg" spellcheck="false" placeholder="sporočilo" />
        <div class="boxed framerate">
          <span>hitrost:&nbsp;</span>
          <input type="range" name="fr" id="fr" min="5" max="30" step="5" value="30" />
        </div>
        <input class="boxed" type="submit" value="ok" />
      </form>
    </div>

    <script>
      const $ = (s) => document.querySelector(s);

      $('form').onsubmit = function (e) {
        let inputVal = $('input#msg').value;

        if (!inputVal.trim()) {
          e.preventDefault();
          return;
        }

        let safeString = encodeURIComponent(inputVal);
        $('input#msg').value = btoa(safeString);

        // TODO: ni tako vredu, da se value dejansko spremeni. moraš naredit manualno ..
      };
    </script>
  </body>
</html>
